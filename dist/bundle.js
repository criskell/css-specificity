(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){const debounce=require("lodash/debounce");const{specificity}=require("../lib");const{maximumArray}=require("../lib/util");const $input=document.querySelector("#input");const $results=document.querySelector(".results");const resultAsHtml=(selector,[a,b,c])=>`<div class="result">
<p>No seletor<code class="selector">${selector}</code>, há...</p>
<ul>
    <li>
        <span class="count">${a}</span>
        <span>ids</span>
    </li>
    <li>
        <span class="count">${b}</span>
        <span>classes, pseudo-classes e atributos</span>
    </li>
    <li>
        <span class="count">${c}</span>
        <span>elementos e pseudo-elementos</span>
    </li>
</ul>
</div>`;const handleInput=selector=>{$results.innerHTML=resultAsHtml(selector,maximumArray(specificity(selector)))};$input.addEventListener("input",debounce(e=>handleInput(e.target.value),500));handleInput($input.value)},{"../lib":2,"../lib/util":3,"lodash/debounce":12}],2:[function(require,module,exports){const Parsel=require("parsel-js");const{maximumArray,sumArrays,splitBy,updateAt}=require("./util");const SPECIFICITY_LEVELS=[["id"],["class","pseudo-class","attribute"],["type","pseudo-element"]];const specificity=selector=>selector==""?[]:splitBy(Parsel.tokenize(selector),isCommaToken).map(calculateTokensSpecificity);const calculateTokensSpecificity=tokens=>tokens.reduce((specificity,token)=>sumArrays(specificity,getTokenSpecificity(token)),[0,0,0]);const isCommaToken=token=>token.type==="comma";const getSpecificityLevel=token=>SPECIFICITY_LEVELS.findIndex(level=>level.includes(token.type));const getTokenSpecificity=token=>{if(token.type==="pseudo-class"&&["is","not","has"].includes(token.name)){return maximumArray(specificity(token.argument))}if(token.type==="pseudo-class"&&token.name==="where"){return[0,0,0]}return updateAt([0,0,0],getSpecificityLevel(token),1)};module.exports={specificity:specificity,calculateTokensSpecificity:calculateTokensSpecificity}},{"./util":3,"parsel-js":18}],3:[function(require,module,exports){const splitBy=(array,predicate)=>{const groups=[[]];for(const element of array){if(predicate(element)){groups.push([])}else{groups[groups.length-1].push(element)}}return groups};const compareNumber=(x,y)=>Math.sign(x-y);const compareArray=(xs,ys)=>{return xs.map((x,idx)=>compareNumber(x,ys[idx])).find(comparation=>comparation!==0)||0};const sumArrays=(xs,ys)=>xs.map((x,idx)=>x+ys[idx]);const maximum=(xs,compareFn)=>xs.reduce((maximum,value)=>compareFn(value,maximum)?value:maximum);const maximumArray=arrays=>maximum(arrays,(array,maximumArray)=>compareArray(array,maximumArray)===1);const updateAt=(array,idx,value)=>idx>=0?Object.assign(array,{[idx]:value}):array;module.exports={splitBy:splitBy,compareArray:compareArray,sumArrays:sumArrays,maximum:maximum,maximumArray:maximumArray,updateAt:updateAt}},{}],4:[function(require,module,exports){var root=require("./_root");var Symbol=root.Symbol;module.exports=Symbol},{"./_root":10}],5:[function(require,module,exports){var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},{"./_Symbol":4,"./_getRawTag":8,"./_objectToString":9}],6:[function(require,module,exports){var trimmedEndIndex=require("./_trimmedEndIndex");var reTrimStart=/^\s+/;function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}module.exports=baseTrim},{"./_trimmedEndIndex":11}],7:[function(require,module,exports){(function(global){(function(){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],8:[function(require,module,exports){var Symbol=require("./_Symbol");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},{"./_Symbol":4}],9:[function(require,module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},{}],10:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":7}],11:[function(require,module,exports){var reWhitespace=/\s/;function trimmedEndIndex(string){var index=string.length;while(index--&&reWhitespace.test(string.charAt(index))){}return index}module.exports=trimmedEndIndex},{}],12:[function(require,module,exports){var isObject=require("./isObject"),now=require("./now"),toNumber=require("./toNumber");var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max,nativeMin=Math.min;function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){clearTimeout(timerId);timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}module.exports=debounce},{"./isObject":13,"./now":16,"./toNumber":17}],13:[function(require,module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},{}],14:[function(require,module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},{}],15:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},{"./_baseGetTag":5,"./isObjectLike":14}],16:[function(require,module,exports){var root=require("./_root");var now=function(){return root.Date.now()};module.exports=now},{"./_root":10}],17:[function(require,module,exports){var baseTrim=require("./_baseTrim"),isObject=require("./isObject"),isSymbol=require("./isSymbol");var NAN=0/0;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=toNumber},{"./_baseTrim":6,"./isObject":13,"./isSymbol":15}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={attribute:/\[\s*(?:(?<namespace>\*|[-\w]*)\|)?(?<name>[-\w\u{0080}-\u{FFFF}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(?<caseSensitive>[iIsS])?\s*)?\]/gu,id:/#(?<name>(?:[-\w\u{0080}-\u{FFFF}]|\\.)+)/gu,class:/\.(?<name>(?:[-\w\u{0080}-\u{FFFF}]|\\.)+)/gu,comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":/::(?<name>[-\w\u{0080}-\u{FFFF}]+)(?:\((?<argument>¶+)\))?/gu,"pseudo-class":/:(?<name>[-\w\u{0080}-\u{FFFF}]+)(?:\((?<argument>¶+)\))?/gu,type:/(?:(?<namespace>\*|[-\w]*)\|)?(?<name>[-\w\u{0080}-\u{FFFF}]+)|\*/gu},t=new Set(["pseudo-class","pseudo-element"]),n=new Set([...t,"attribute"]),r=new Set(["combinator","comma"]),s=new Set(["not","is","where","has","matches","-moz-any","-webkit-any","nth-child","nth-last-child"]),o={"nth-child":/(?<index>[\dn+-]+)\s+of\s+(?<subtree>.+)/};s["nth-last-child"]=o["nth-child"];const l=Object.assign({},e);function i(e,t){let n="",r=[];for(;t<e.length;t++){let s=e[t];if("("===s)r.push(s);else if(")"===s){if(!(r.length>0))throw new Error("Closing paren without opening paren at "+t);r.pop()}if(n+=s,0===r.length)return n}throw new Error("Opening paren without closing paren")}function u(e,t){if(!e)return[];var n=[e];for(var s in t){let e=t[s];for(var o=0;o<n.length;o++){var l=n[o];if("string"==typeof l){e.lastIndex=0;var i=e.exec(l);if(i){let e=i.index-1,t=[],r=i[0],u=l.slice(0,e+1);u&&t.push(u),t.push({type:s,content:r,...i.groups});let a=l.slice(e+r.length+1);a&&t.push(a),n.splice(o,1,...t)}}}}let u=0;for(let e=0;e<n.length;e++){let t=n[e],s=t.length||t.content.length;"object"==typeof t&&(t.pos=[u,u+s],r.has(t.type)&&(t.content=t.content.trim()||" ")),u+=s}return n}function a(r){if(!r)return null;r=r.trim();let s=[];r=r.replace(/(['"])(\\\1|.)+?\1/g,(e,t,n,r)=>(s.push({str:e,start:r}),t+"§".repeat(n.length)+t));let o,a=[],p=0;for(;(o=r.indexOf("(",p))>-1;){let e=i(r,o);a.push({str:e,start:o}),r=r.substring(0,o)+"("+"¶".repeat(e.length-2)+")"+r.substring(o+e.length),p=o+e.length}let c=u(r,e);function f(e,t,n){for(let r of e)for(let e of c)if(n.has(e.type)&&e.pos[0]<r.start&&r.start<e.pos[1]){let n=e.content;if(e.content=e.content.replace(t,r.str),e.content!==n){l[e.type].lastIndex=0;let t=l[e.type].exec(e.content).groups;Object.assign(e,t)}}}return f(a,/\(¶+\)/,t),f(s,/(['"])§+?\1/,n),c}function p(e,{list:t=!0}={}){if(t&&e.find(e=>"comma"===e.type)){let t=[],n=[];for(let r=0;r<e.length;r++)if("comma"===e[r].type){if(0===n.length)throw new Error("Incorrect comma at "+r);t.push(p(n,{list:!1})),n.length=0}else n.push(e[r]);if(0===n.length)throw new Error("Trailing comma");return t.push(p(n,{list:!1})),{type:"list",list:t}}for(let t=e.length-1;t>=0;t--){let n=e[t];if("combinator"===n.type){let r=e.slice(0,t),s=e.slice(t+1);return{type:"complex",combinator:n.content,left:p(r),right:p(s)}}}return 0===e.length?null:1===e.length?e[0]:{type:"compound",list:[...e]}}function c(e,t,n,r){if(e){if("complex"===e.type)c(e.left,t,n,e),c(e.right,t,n,e);else if("compound"===e.type)for(let r of e.list)c(r,t,n,e);else e.subtree&&n&&n.subtree&&c(e.subtree,t,n,e);t(e,r)}}function f(e,{recursive:t=!0,list:n=!0}={}){let r=a(e);if(!r)return null;let l=p(r,{list:n});return t&&c(l,e=>{if("pseudo-class"===e.type&&e.argument&&s.has(e.name)){let t=e.argument;const n=o[e.name];if(n){const r=n.exec(t);if(!r)return;Object.assign(e,r.groups),t=r.groups.subtree}t&&(e.subtree=f(t,{recursive:!0,list:!0}))}}),l}function g(e,t){return t=t||Math.max(...e)+1,e[0]*t**2+e[1]*t+e[2]}l["pseudo-element"]=RegExp(e["pseudo-element"].source.replace("(?<argument>¶+)","(?<argument>.+?)"),"gu"),l["pseudo-class"]=RegExp(e["pseudo-class"].source.replace("(?<argument>¶+)","(?<argument>.+)"),"gu"),exports.RECURSIVE_PSEUDO_CLASSES=s,exports.RECURSIVE_PSEUDO_CLASSES_ARGS=o,exports.TOKENS=e,exports.TRIM_TOKENS=r,exports.gobbleParens=i,exports.nestTokens=p,exports.parse=f,exports.specificity=function e(t,{format:n="array"}={}){let r="object"==typeof t?t:f(t,{recursive:!0});if(!r)return null;if("list"===r.type){let t=10,n=r.list.map(n=>{let r=e(n);return t=Math.max(t,...r),r}),s=n.map(e=>g(e,t));return n[function(e){let t=e[0],n=0;for(let r=0;r<e.length;r++)e[r]>t&&(n=r,t=e[r]);return 0===e.length?-1:n}(s)]}let o=[0,0,0];return c(r,t=>{if("id"===t.type)o[0]++;else if("class"===t.type||"attribute"===t.type)o[1]++;else if("type"===t.type&&"*"!==t.content||"pseudo-element"===t.type)o[2]++;else if("pseudo-class"===t.type&&"where"!==t.name)if(s.has(t.name)&&t.subtree){e(t.subtree).forEach((e,t)=>o[t]+=e)}else o[1]++}),o},exports.specificityToNumber=g,exports.tokenize=a,exports.tokenizeBy=u,exports.walk=c},{}]},{},[1]);
